---
title: "西暦を和暦に変換する"
date: 2018-01-22T16:07:50+09:00
weight: 1540
---

## 概要

文字列、または日付フィールドを元に和暦に変換し、別のフィールドへセットします。

## 使い方

変換した元号、和暦年数をフィールドにセットする場合は、そのフィールドをアプリに作成しておき、「元号のセット先」「和暦年数のセット先」でそのフィールドを選びます。

変換した元号、和暦年数を、個別のフィールドに分けて登録するのではなく、「平成30年」のように１つの文字列としてフィールド等に入れたい場合は、以下のようにします。

1. 「元号のセット先」「和暦年数のセット先」は設定せず省略しておきます。
2. 「[フィールドに値をセットする](../set_field_value)」を設置し、その「値」を計算機能を用いて以下のように設定します。

```
= $1.era & $1.year & "年"
```
- $1 の部分は、「西暦を和暦に変換する」をセットしたアクションの番号を指定してください。例えばアクション番号が3だった場合は、$3とします。
- $1.era が「平成」などの元号部分、$1.year が年数部分を表します。

### 設定するパラメーター

「変換元の日付」「元号のセット先」「和暦年数のセット先」を設定します。

#### 変換元の日付

西暦で記録された日付を持つフィールドを選択します。

以下のフィールドタイプから選択することができます。

- 文字列(1行)
- 日付
- 日時
- 作成日時
- 更新日時

文字列(1行)のフィールドを選ぶ場合、正しい日付形式で値がセットされている必要があります。

#### 元号のセット先

元号をセットするフィールドを選択します。省略可能です。

文字列(1行)のみ選択できます。

省略した場合、元号はフィールドにセットされません。省略しても他のアクションから参照することは可能です。

#### 和暦年数のセット先

和暦年数をセットするフィールドを選択します。省略可能です。

文字列(1行)または数値フィールドを選択できます。

元号の初年は「元年」ではなく「1」になります。

省略した場合、和暦年数はフィールドにセットされません。省略しても他のアクションから参照することは可能です。

## 制限事項

### 対応する元号の範囲

どの時代の元号まで対応しているかは、ユーザーのブラウザー(*) に依存します。

(*) Customine でカスタマイズを作成する際のブラウザーではなく、ユーザーがカスタマイズされた kintone アプリへアクセスしたときのブラウザーに依存します。

- IE11 ... 明治以降
- Chrome ... 大化以降
- FireFox ... 大化以降
- Safari ... 大化以降

### 新元号への対応

西暦2019年よりはじまる新元号への対応は、ユーザーのブラウザー(*) に依存します。

(*) Customine でカスタマイズを作成する際のブラウザーではなく、ユーザーがカスタマイズされた kintone アプリへアクセスしたときのブラウザーに依存します。

Customine初版リリース時点(2018年3月)で、新元号が決まっていないため、どのブラウザーもまだ対応していません。
ブラウザーが対応した時点で、ユーザーがご使用のブラウザーをアップデートしていただくと新元号に対応されます。


