---
title: "レコードからプルダウンを作成する"
date: 2018-01-22T16:07:50+09:00
weight: 1800
---

## 概要

他のアクションで取得したレコードをもとに、プルダウン（ドロップダウンメニュー）を作成します。

## 使い方

準備として、カスタマイズ対象のアプリに、プルダウンを配置するスペースフィールドと、プルダウンの値を保存するフィールドを設置します。

プルダウンの内容を定義するためのアプリを作成し、レコードを作成しておきます。

Customine のカスタマイズ設定で、「[全レコードを取得する](../../record/get_all_records/)」などのレコードを取得するアクションで、
プルダウンの内容を定義するためのアプリからデータを取得します。

次に「レコードからプルダウンを作成する」を配置し、あらかじめ用意したスペースフィールド、プルダウンの値を保存するフィールドなどを設定します。

## 例

商品を管理する「商品管理アプリ」があったとして、商品の分類を別のアプリで定義し、その分類コードを「商品管理アプリ」で選択したい、という場合を考えます。

1. 「商品分類マスター」アプリを作成し、分類コードと分類名称フィールドを置き、レコードを作成します。
2. 「商品管理アプリ」に「商品分類コード」のフィールドと、プルダウンを表示するスペースを置きます。
3. Cutomine で「商品管理アプリ」のカスタマイズをはじめます。
4. 編集画面開始時に「[全レコードを取得する](../../record/get_all_records/)」で「商品分類マスター」の全レコードを取るようにします。
5. 「レコードからプルダウンを作成する」を配置し、以下のように設定します。
    - データ保存フィールド → 「商品分類コード」
    - スペース → あらかじめ配置したスぺース
    - ラベル → 「商品分類」
    - レコード → 上の手順でセットしたレコード取得アクション
    - 表示するフィールド → 「分類名称」
    - 値となるフィールド → 「分類コード」
    


### 設定するパラメーター

「データ保存フィールド」「スペース」「ラベル」「レコード」「表示するフィールド」「値となるフィールド」を設定します。

#### データ保存フィールド

選択したプルダウンの内容を保存するためのフィールドを選択します。

選択可能なフィールドタイプは「文字列 (1行)」のみとなります。

#### スペース

プルダウンを表示するスペースを選択します。

#### ラベル

プルダウンに表示するラベルを設定します。

#### レコード

プルダウンの内容となるレコードを取得したアクションを選択します。

上記の例では「[全レコードを取得する](../../record/get_all_records/)」から取得していますが、
それ以外の取得方法、例えば「[キーを指定してレコードを取得する](../../record/get_records_by_key/)」などで取得したものでも構いません。

#### 表示するフィールド

プルダウンに表示するフィールドを指定します。
このフィールドはカスタマイズしている最中のアプリのフィールドではなく、取得したレコードの元アプリのフィールドになります。

例えば取得元のアプリが「○○コード」「○○名」で構成されているとして、データとしては「○○コード」を保存したいがプルダウンの表示上は「○○名」を表示したいような場合に、「○○名」の方を選択します。

#### 値となるフィールド

プルダウンから選択したときに「データ保存フィールド」に入れる値を持ったフィールドを選択します。
このフィールドはカスタマイズしている最中のアプリのフィールドではなく、取得したレコードの元アプリのフィールドになります。

例えば取得元のアプリが「○○コード」「○○名」で構成されているとして、プルダウンの表示上は「○○名」を表示するが「データ保存フィールド」には「○○コード」を保存したい場合、「○○コード」フィールドを選びます。

## 制限事項

- レコード詳細画面やレコード印刷画面で使用した場合、プルダウンにはならず、
    編集画面で選択したプルダウンの「表示するフィールド」が表示されます。

- このアクションをレコード編集画面やレコード追加画面で実行すると、
    「データ保存フィールド」をは編集不可になり、直接入力することができなくなります。
    「[フィールドを有効化する](../../field/enable_field/)」で強制的に有効にすることは可能ですが、
    その場合、「データ保存フィールド」を手入力しても、プルダウン側には反映されません。

- スマートフォン版には対応していません。

### 「データ保存フィールド」として選択可能なフィールドタイプ

- 文字列 (1行)

### 「表示するフィールド」として選択可能なフィールドタイプ

- レコード番号
- 文字列 (1行)
- 数値
- 計算
- 日付
- 時刻
- 日時
- ルックアップ

### 「値となるフィールド」として選択可能なフィールドタイプ

- レコード番号
- 文字列 (1行)
- 文字列 (複数行)
- リッチエディター
- リンク
- 数値
- 計算
- 日付
- 時刻
- 日時
- ルックアップ
