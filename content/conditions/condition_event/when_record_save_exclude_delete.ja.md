---
title: "レコードを保存する直前（削除時は除く）"
date: 2018-01-22T16:07:50+09:00
weight: 1052
---

## 概要

レコードを保存する直前にアクションを実行します。

削除する直前には実行されません。

## 使い方

以下のいずれかの場合にアクションを実行する条件として指定します。

- ユーザーがレコードの追加画面、編集画面でレコードの保存ボタンを押したとき
- PCのレコード一覧画面で、鉛筆ボタンを押して一覧画面内でレコードのインライン編集し、保存ボタンを押したとき

保存する直前なので、この条件で特定のアクションを実行することで保存をキャンセルすることができます。
具体的には、フィールドにエラーを発生させるアクションを実行したり、
「[レコードの保存をキャンセルする](../../../actions/other/cancel_submit)」を行うと、
レコードは保存されずに編集画面のままとどまります。

「[レコードを保存・削除する直前](../when_record_save/)」と異なり、
レコード削除のタイミングでは発動しません。

## 制限事項

kintone 標準の画面操作から保存操作を行った場合のみ発動します。
「[レコードを更新する](../../../actions/record/update_record/)」のように、カスタマイズを使ってレコードを保存した場合は発動しません。

### フィールドの値を書き換える場合

この条件発動時にフィールドの値を書き換えるアクションを組み合わせた場合、以下のフィールドは値をセットしても反映されません。

- レコード番号
- 作成者
- 作成日時
- 更新者
- 更新日時
- ステータス
- 作業者
- 計算
- 自動計算にした文字列1行
- 添付ファイル
- ルックアップ
- ルックアップコピー先フィールド

これは、kintone の仕様による制限です。
https://developer.cybozu.io/hc/ja/articles/202166270#step4
